<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Home</title>
  <style>
    :root {
      --bg: #0f0f12;
      --surface: #18181c;
      --border: #2a2a30;
      --text: #e4e4e7;
      --muted: #71717a;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }
    h1 {
      font-size: 1.75rem;
      font-weight: 600;
      margin-bottom: 32px;
      letter-spacing: -0.02em;
    }
    .links {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      min-width: 520px;
    }
    .links a {
      display: block;
      padding: 16px 20px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      text-decoration: none;
      font-size: 16px;
      font-weight: 500;
      transition: border-color 0.15s, background 0.15s;
    }
    .links a:hover {
      border-color: var(--accent);
      background: rgba(59, 130, 246, 0.08);
    }
    .links .desc {
      font-size: 13px;
      color: var(--muted);
      font-weight: 400;
      margin-top: 4px;
    }
    .ip-box {
      min-width: 280px;
      padding: 16px 20px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 24px;
      font-size: 14px;
    }
    .ip-box .label { color: var(--muted); margin-right: 8px; }
    .ip-box .value { font-family: ui-monospace, monospace; }
    .ip-box .row { margin-bottom: 8px; }
    .ip-box .row:last-child { margin-bottom: 0; }
    body.day-mode {
      --bg: #f4f4f5;
      --surface: #fff;
      --border: #e4e4e7;
      --text: #18181b;
      --muted: #71717a;
    }
    .theme-toggle {
      position: absolute;
      top: 24px;
      right: 24px;
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--surface);
      color: var(--text);
      font-size: 13px;
      cursor: pointer;
    }
    .theme-toggle:hover { border-color: var(--accent); }
  </style>
</head>
<body class="day-mode">
  <button type="button" class="theme-toggle" id="themeToggle" title="Toggle day/night mode">Day</button>
  <h1>Home</h1>
  <div class="ip-box" id="ipBox">
    <div class="row"><span class="label">Local:</span><span class="value" id="localIp">—</span></div>
    <div class="row"><span class="label">Public:</span><span class="value" id="publicIp">—</span></div>
  </div>
  <nav class="links">
    <a href="/s/player.html">
      <span>M3U8 HLS Player</span>
      <div class="desc">CCTV streams (CCTV4, CCTV5, CCTV6)</div>
    </a>
    <a href="/s/media.html">
      <span>Media Player</span>
      <div class="desc">Play movies and videos from URL (MP4, M3U8)</div>
    </a>
    <a href="/s/files.html">
      <span>File Server</span>
      <div class="desc">Browse and download files from the server</div>
    </a>
    <a href="/s/rest-test.html">
      <span>REST Test</span>
      <div class="desc">Test HTTP REST API (devices, customers, /api/info)</div>
    </a>
    <a href="/s/websocket-test.html">
      <span>WebSocket Test</span>
      <div class="desc">Live device & customer events via Socket.IO</div>
    </a>
    <a href="/s/mqtt-test.html">
      <span>MQTT Test</span>
      <div class="desc">Live device & customer events via MQTT</div>
    </a>
    <a href="/s/viewer-3d.html">
      <span>3D Model Viewer</span>
      <div class="desc">View GLB model (files/3d models/122.glb) — rotate, zoom, pan</div>
    </a>
    <a href="/s/chat.html">
      <span>Chat</span>
      <div class="desc">Real-time chat (WebSocket + PostgreSQL)</div>
    </a>
    <a href="/s/chatroom-test.html">
      <span>Chatroom DB Test</span>
      <div class="desc">REST & WebSocket test for chat rooms and messages</div>
    </a>
  </nav>
  <script>
    (function() {
      var localEl = document.getElementById('localIp');
      var publicEl = document.getElementById('publicIp');
      fetch('/api/info')
        .then(function(r) { if (!r.ok) throw new Error(); return r.json(); })
        .then(function(data) {
          localEl.textContent = (data.local && data.local.length) ? data.local.join(', ') : '—';
          publicEl.textContent = data.public || '—';
        })
        .catch(function() {
          localEl.textContent = window.location.hostname || '—';
          publicEl.textContent = '—';
        });
    })();
    (function() {
      var KEY = 'appTheme';
      var btn = document.getElementById('themeToggle');
      if (!btn) return;
      function isDay() { return document.body.classList.contains('day-mode'); }
      function setDay(on) {
        if (on) { document.body.classList.add('day-mode'); btn.textContent = 'Day'; try { localStorage.setItem(KEY, 'day'); } catch(e) {} }
        else { document.body.classList.remove('day-mode'); btn.textContent = 'Night'; try { localStorage.setItem(KEY, 'night'); } catch(e) {} }
      }
      if (localStorage.getItem(KEY) !== 'night') setDay(true);
      btn.addEventListener('click', function() { setDay(!isDay()); });
    })();
  </script>
</body>
</html>

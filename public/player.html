<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CCTV · M3U8 HLS Player</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.7"></script>
  <style>
    :root {
      --bg: #0f0f12;
      --surface: #18181c;
      --border: #2a2a30;
      --text: #e4e4e7;
      --muted: #71717a;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px;
    }
    h1 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 20px;
      letter-spacing: -0.02em;
    }
    .player-wrap {
      width: 100%;
      max-width: 960px;
      background: var(--surface);
      border-radius: 12px;
      border: 1px solid var(--border);
      overflow: hidden;
      margin-bottom: 20px;
    }
    .video-wrap {
      position: relative;
      width: 100%;
      aspect-ratio: 16/9;
      background: #000;
    }
    video {
      width: 100%;
      height: 100%;
      display: block;
    }
    .controls {
      padding: 16px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }
    .url-input {
      flex: 1;
      min-width: 200px;
      padding: 10px 14px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 14px;
    }
    .url-input::placeholder { color: var(--muted); }
    .url-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
    }
    .btn {
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.15s;
    }
    .btn-primary {
      background: var(--accent);
      color: #fff;
    }
    .btn-primary:hover { background: var(--accent-hover); }
    .btn-secondary {
      background: var(--border);
      color: var(--text);
    }
    .btn-secondary:hover { background: #3f3f46; }
    .status {
      font-size: 13px;
      color: var(--muted);
      width: 100%;
      margin-top: 4px;
    }
    .status.error { color: #f87171; }
    .status.playing { color: #4ade80; }
    .presets {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
      width: 100%;
      max-width: 960px;
    }
    .presets .btn { padding: 8px 12px; font-size: 13px; }
  </style>
</head>
<body>
  <p style="margin-bottom:12px;"><a href="/s/index.html" style="color:var(--muted);font-size:13px;text-decoration:none;">← Home</a></p>
  <h1>CCTV · M3U8 HLS Player</h1>
  <div class="presets">
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV1HD/hls.m3u8">CCTV1</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV2HD/hls.m3u8">CCTV2</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV3HD/hls.m3u8">CCTV3</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV4HD/hls.m3u8">CCTV4</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV5HD/hls.m3u8">CCTV5</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV5PHD/hls.m3u8">CCTV5+</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV6HD/hls.m3u8">CCTV6</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV7HD/hls.m3u8">CCTV7</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV8HD/hls.m3u8">CCTV8</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/CCTV13HD/hls.m3u8">CCTV13</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/HUNANHD/hls.m3u8">湖南卫视</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/ZHEJIANGHD/hls.m3u8">浙江卫视</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/JIANGSUHD/hls.m3u8">江苏卫视</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/DRAGONTV/hls.m3u8">东方卫视</button>
    <button type="button" class="btn btn-secondary" data-url="https://node1.olelive.com:6443/live/BEIJINGHD/hls.m3u8">北京卫视</button>
    <button type="button" class="btn btn-secondary" data-url="https://turnerlive.warnermediacdn.com/hls/live/586495/cnngo/cnn_slate/VIDEO_0_3564000.m3u8">CNN</button>
    <button type="button" class="btn btn-secondary" data-url="https://abclive1-lh.akamaihd.net/i/abc_live01@423395/master.m3u8">ABC News</button>
    <button type="button" class="btn btn-secondary" data-url="http://a.files.bbci.co.uk/media/live/manifesto/audio_video/simulcast/hls/uk/abr_hdtv/ak/bbc_one_hd.m3u8">BBC One</button>
    <button type="button" class="btn btn-secondary" data-url="http://cbcnewshd-f.akamaihd.net/i/cbcnews_1@8981/index_2500_av-p.m3u8">CBC News</button>
    <button type="button" class="btn btn-secondary" data-url="https://pe-fa-lp02a.9c9media.com/live/News1Digi/p/hls/00000201/38ef78f479b07aa0/index/0c6a10a2/live/stream/h264/v1/3500000/manifest.m3u8">CTV News</button>
    <button type="button" class="btn btn-secondary" data-url="https://ntv1.akamaized.net/hls/live/2014075/NASA-NTV1-HLS/master.m3u8">NASA TV</button>
    <button type="button" class="btn btn-secondary" data-url="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8">Test (Mux)</button>
  </div>
  <div class="player-wrap">
    <div class="video-wrap">
      <video id="video" controls playsinline></video>
    </div>
    <div class="controls">
      <input
        type="url"
        class="url-input"
        id="urlInput"
        placeholder="Enter M3U8 URL"
        value="https://node1.olelive.com:6443/live/CCTV1HD/hls.m3u8"
      />
      <button type="button" class="btn btn-primary" id="playBtn">Play</button>
      <button type="button" class="btn btn-secondary" id="stopBtn">Stop</button>
      <div class="status" id="status">Enter URL and click Play</div>
    </div>
  </div>

  <script>
    const video = document.getElementById('video');
    const urlInput = document.getElementById('urlInput');
    const playBtn = document.getElementById('playBtn');
    const stopBtn = document.getElementById('stopBtn');
    const statusEl = document.getElementById('status');

    let hls = null;

    function setStatus(msg, type = '') {
      statusEl.textContent = msg;
      statusEl.className = 'status ' + type;
    }

    function stop() {
      if (hls) {
        hls.destroy();
        hls = null;
      }
      video.removeAttribute('src');
      video.load();
      setStatus('Stopped');
    }

    function play() {
      const url = urlInput.value.trim();
      if (!url) {
        setStatus('Please enter M3U8 URL', 'error');
        return;
      }
      if (!url.endsWith('.m3u8') && !url.includes('m3u8')) {
        setStatus('Please enter a valid M3U8 URL', 'error');
        return;
      }

      stop();

      if (Hls.isSupported()) {
        hls = new Hls({
          enableWorker: true,
          lowLatencyMode: true,
        });
        hls.loadSource(url);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, () => setStatus('Playing', 'playing'));
        hls.on(Hls.Events.ERROR, (e, data) => {
          if (data.fatal) {
            setStatus('Load failed: ' + (data.details || data.type), 'error');
          }
        });
      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = url;
        video.addEventListener('loadedmetadata', () => setStatus('Playing', 'playing'));
        setStatus('Playing', 'playing');
      } else {
        setStatus('This browser does not support HLS playback', 'error');
      }
    }

    playBtn.addEventListener('click', play);
    stopBtn.addEventListener('click', stop);
    urlInput.addEventListener('keydown', (e) => e.key === 'Enter' && play());
    document.querySelectorAll('.presets [data-url]').forEach(btn => {
      btn.addEventListener('click', () => {
        urlInput.value = btn.getAttribute('data-url');
        play();
      });
    });
  </script>
</body>
</html>
